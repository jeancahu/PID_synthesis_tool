<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" type="text/css" href="/css/tool_style.css" media="screen"/>

    <title>PI/PID Tunning CGI tool web interface</title>
  </head>
  <body>

    <resultsbox>
      <parameters>
	<div>
	  <h2>Model parameters:</h2>

	  <div id="model_params">
	    <div class='number_space'>
	      <label>Fractional parameter</label>
	      <number_label>{{v_param}}</number_label>
	    </div>

	    <div class='number_space'>
	      <label>Time Constant</label>
	      <number_label>{{T_param}}</number_label>
	    </div>

	    <div class='number_space'>
	      <label>Process Gain</label>
	      <number_label>{{K_param}}</number_label>
	    </div>

	    <div class='number_space'>
	      <label>Dead Time Constant</label>
	      <number_label>{{L_param}}</number_label>
	    </div>

	    <div class='number_space'>
	      <label>IAE Index</label>
	      <number_label>-</number_label>
	    </div>

	    
	  </div>


	  <h2>Controller parameters:</h2>

	  <div id="controllers_params">

	    <div class='number_space'>
	      <label>Controller:</label>
	      <number_label id='controller_name'>-</number_label>
	    </div>

	    <div class='number_space'>
	      <label>Proportional value</label>
	      <number_label id='kp_const'>-</number_label>
	    </div>

	    <div class='number_space'>
	      <label>Integral value</label>
	      <number_label id='ti_const'>-</number_label>
	    </div>

	    <div class='number_space'>
	      <label>Differential value</label>
	      <number_label id='td_const'>-</number_label>
	    </div>

	    <div class='number_space'>
	      <label>Normal. Prop. value</label>
	      <number_label id='n_kp_const'>-</number_label>
	    </div>

	    <div class='number_space'>
	      <label>Normal. Integral value</label>
	      <number_label id='n_ti_const'>-</number_label>
	    </div>

	    <div class='number_space'>
	      <label>Normal. diff. value</label>
	      <number_label id='n_td_const'>-</number_label>
	    </div>

	    
	  </div>
	</div>
      </parameters>

    <images_tag>

      <iframe id="response_graph" scrolling="no" src="{{iframe_plotly}}"></iframe>
     
      <div id="keyboard">
	<button class='result_button' onclick='params_toggle("PI","1.4")'>PI, Ms=1.4</button>
	<button class='result_button' onclick='params_toggle("PI","2.0")'>PI, Ms=2.0</button>
	<button class='result_button' onclick='params_toggle("PID","1.4")'>PID, Ms=1.4</button>
	<button class='result_button' onclick='params_toggle("PID","2.0")'>PID, Ms=2.0</button>
      </div>

      <script type="text/javascript">
      
	var controllers = [ {{controller_params}} ];
	function params_toggle(cnt, ms)
	{
	    for ( var element = 0; element<controllers.length; element++ ){
		console.log(controllers[element]);
		if ( controllers[element].type == cnt && controllers[element].ms == ms )
		{
		    document.getElementById('controller_name').innerHTML = cnt+', Ms = '+ms;
		    document.getElementById('kp_const').innerHTML = controllers[element].kp;
		    document.getElementById('ti_const').innerHTML = controllers[element].ti;
		    document.getElementById('td_const').innerHTML = controllers[element].td;
		    document.getElementById('n_kp_const').innerHTML = controllers[element].n_kp;
		    document.getElementById('n_ti_const').innerHTML = controllers[element].n_ti;
		    document.getElementById('n_td_const').innerHTML = controllers[element].n_td;
		    break;
		}
	    }
	}
      </script>
    </images_tag>
    
    </resultsbox>
    
  </body>
</html>
